---
- hosts: all

  - name: "cr√©ation de dossiers pour les volumes"
    file:
      path: {{ item }}
      state: directory
      mode: 0770
    loop:
     - /home/gitlab/data
     - /home/gitlab/logs
     - /home/gitlab/config
   
  - name: "execution d'un conteneur gitlab-ce"
    docker_container:
      name: "gitlab-ce container execution"
       image: gitlab/gitlab-ce
       volumes:
          - /home/gitlab/data:/var/opt/gitlab
          - /home/gitlab/logs:/var/log/gitlab
          - /home/gitlab/config:/etc/gitlab
     
     published_ports:
          - 8080:80
